<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>
<div class="container">
    <div class="header">
        <h2>Who to follow</h2><a href="#" class="refresh">Refresh</a>
    </div>
    <ul class="suggestions">
        <li class="suggestion1">
            <img />
            <a href="#" target="_blank" class="username">this will not be displayed</a>
            <a href="#" class="close close1">x</a>
        </li>
        <li class="suggestion2">
            <img />
            <a href="#" target="_blank" class="username">neither this</a>
            <a href="#" class="close close2">x</a>
        </li>
        <li class="suggestion3">
            <img />
            <a href="#" target="_blank" class="username">nor this</a>
            <a href="#" class="close close3">x</a>
        </li>
    </ul>
</div>
<!--<script src="https://cdn.bootcss.com/jquery/3.3.1/core.js"></script>-->
<!--<script src="http://cdnjs.cloudflare.com/ajax/libs/rxjs/2.2.26/rx.js"></script>-->
<!--<script src="http://cdnjs.cloudflare.com/ajax/libs/rxjs/2.2.26/rx.async.js"></script>-->
<!--<script src="http://cdnjs.cloudflare.com/ajax/libs/rxjs/2.2.26/rx.coincidence.js"></script>-->
<!--<script src="http://cdnjs.cloudflare.com/ajax/libs/rxjs/2.2.26/rx.binding.js"></script>-->
<!--<script src="http://cdnjs.cloudflare.com/ajax/libs/rxjs/2.2.26/rx.time.js"></script>-->
<!--<script src="http://cdnjs.cloudflare.com/ajax/libs/rxjs-dom/2.0.7/rx.dom.js"></script>-->
<script src="https://unpkg.com/rxjs@5.5.6/bundles/Rx.min.js"></script>
<script>

    /**
     * 在close点击时，清掉当前的item，并request，然后拿到一个值填入
     * 继承自closestream，拿到index的stream，拿到response的stream
     */


//var refreshButton = document.querySelector('.refresh');
//var refreshClickStream = Rx.Observable.fromEvent(refreshButton, 'click');
//
//// var closeButton1 = document.querySelector('.close1');
//// var close1ClickStream = Rx.Observable.fromEvent(closeButton1, 'click');
//// and the same logic for close2 and close3
//
////在页面渲染完时和refreshClick时会触发该stream
//var requestStream = refreshClickStream.startWith('startup click')
//  .map(function() {
//    var randomOffset = Math.floor(Math.random()*500);
//    return 'https://api.github.com/users?since=' + randomOffset;
//  });
//
////在页面渲染完时和refreshClick时会触发该stream
//var responseStream = requestStream
//  .flatMap(function (requestUrl) {
//    return Rx.Observable.fromPromise($.ajax({url: requestUrl}));
//  });
//
//var suggestion1Stream = close1ClickStream.startWith('startup click')
//  .combineLatest(responseStream,
//    function(click, listUsers) {
//      return listUsers[Math.floor(Math.random()*listUsers.length)];
//    }
//  )
//  .merge(
//    refreshClickStream.map(function(){ return null; })
//  )
//  .startWith(null);
//// and the same logic for suggestion2Stream and suggestion3Stream
//
//suggestion1Stream.subscribe(function(suggestion) {
//  if (suggestion === null) {
//    // hide the first suggestion DOM element
//  }
//  else {
//    // show the first suggestion DOM element
//    // and render the data
//  }
//});
    window.onload = function() {
        function multiplyByTen(input) {
            var output = Rx.Observable.create(function subscribe(observer) {
                input.subscribe({
                    next: function(v) {observer.next(10 * v)},
                    error: function(err) {observer.error(err)},
                    complete: function() {observer.complete()},
                });
            });
            return output;
        }

        var input = Rx.Observable.from([1, 2, 3, 4]);
        var output = multiplyByTen(input);
        output.subscribe(function(x){console.log(x)} );
        input.subscribe(function (x) {
            console.log(x);
        });
    };

</script>
</body>
</html>